image: Visual Studio 2022

shallow_clone: true

cache:
  - packages -> **\packages.config
  - '%LocalAppData%\NuGet\Cache'

before_build:
  - choco install dotnet-sdk --version 9.0.100 # Manually install .NET 9 SDK (until it's available in the image: https://github.com/appveyor/ci/issues/3936)
  - appveyor-retry dotnet restore -v Minimal

build_script:
  - dotnet build Rebus.ServiceProvider -c Release --no-restore

test_script:
  - dotnet test Rebus.ServiceProvider.Tests --no-restore

